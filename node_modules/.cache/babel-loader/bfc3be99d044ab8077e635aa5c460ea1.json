{"ast":null,"code":"import _classCallCheck from \"/home/turiya/Google Drive/Coding/Northcoders 12-Week Course/nc-news/nc-news-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/turiya/Google Drive/Coding/Northcoders 12-Week Course/nc-news/nc-news-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/turiya/Google Drive/Coding/Northcoders 12-Week Course/nc-news/nc-news-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/turiya/Google Drive/Coding/Northcoders 12-Week Course/nc-news/nc-news-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/turiya/Google Drive/Coding/Northcoders 12-Week Course/nc-news/nc-news-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/turiya/Google Drive/Coding/Northcoders 12-Week Course/nc-news/nc-news-frontend/src/components/ArticleAdd.jsx\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport * as api from '../api';\n\nvar ArticleAdd =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ArticleAdd, _Component);\n\n  function ArticleAdd() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ArticleAdd);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ArticleAdd)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      topic: '',\n      title: '',\n      body: '',\n      articleAddedId: null\n    };\n\n    _this.handleTitleChange = function (event) {\n      var title = event.target.value;\n      return _this.setState({\n        title: title\n      });\n    };\n\n    _this.handleBodyChange = function (event) {\n      var body = event.target.value;\n      return _this.setState({\n        body: body\n      });\n    };\n\n    _this.handlePost = function () {\n      var topic = _this.props.match.params.topic_id;\n      var _this$state = _this.state,\n          title = _this$state.title,\n          body = _this$state.body;\n      var created_by = _this.props.loggedInUser._id;\n      return api.addArticle(title, body, created_by, topic).then(function (_ref) {\n        var data = _ref.data,\n            status = _ref.status;\n        if (status === 201) return _this.setRedirect(data._doc._id);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.setRedirect = function (id) {\n      _this.setState({\n        articleAddedId: id\n      });\n    };\n\n    _this.handleRedirect = function () {\n      if (_this.state.articleAddedId) {\n        return React.createElement(Redirect, {\n          to: \"/articles/\".concat(_this.state.articleAddedId),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(ArticleAdd, [{\n    key: \"render\",\n    value: function render() {\n      var topic = this.props.match.params.topic_id;\n      console.log(topic);\n      var topicName = topic ? topic.replace(/^\\w/, function (c) {\n        return c.toUpperCase();\n      }) : '';\n      return React.createElement(\"div\", {\n        className: \"article_add_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"article_add_heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      }, \"Post Article\"), React.createElement(\"span\", {\n        className: \"current_topic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      }, \"Topic: \", topicName ? topicName : 'Technology'), this.props.loggedinUser && React.createElement(\"span\", {\n        className: \"posting_as\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }, \"Posting as \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }, this.props.loggedinUser.username)), !this.props.loggedInUser && React.createElement(\"span\", {\n        className: \"posting_as\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, \"Please log in to post\")), React.createElement(\"form\", {\n        className: \"article_add_form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title_input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, \"Title:\"), React.createElement(\"textarea\", {\n        onChange: this.handleTitleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      })), React.createElement(\"textarea\", {\n        className: \"body_input\",\n        onChange: this.handleBodyChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"post_button\",\n        disabled: !this.props.loggedInUser ? true : false,\n        onClick: this.handlePost,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, \"Post\"));\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      console.log('Component will mount');\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.state.articleAddedId !== prevState.articleAddedId) {\n        this.handleRedirect();\n      }\n    }\n  }]);\n\n  return ArticleAdd;\n}(Component);\n\nexport { ArticleAdd as default };\nArticleAdd.propTypes = {\n  loggedinUser: PropTypes.object,\n  match: PropTypes.object.isRequired\n};","map":{"version":3,"sources":["/home/turiya/Google Drive/Coding/Northcoders 12-Week Course/nc-news/nc-news-frontend/src/components/ArticleAdd.jsx"],"names":["React","Component","Redirect","PropTypes","api","ArticleAdd","state","topic","title","body","articleAddedId","handleTitleChange","event","target","value","setState","handleBodyChange","handlePost","props","match","params","topic_id","created_by","loggedInUser","_id","addArticle","then","data","status","setRedirect","_doc","catch","err","console","log","id","handleRedirect","topicName","replace","c","toUpperCase","loggedinUser","username","prevProps","prevState","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types'\nimport * as api from '../api';\n\nexport default class ArticleAdd extends Component {\n\n    state = {\n        topic: '',\n        title: '',\n        body: '',\n        articleAddedId: null\n    }\n\n    render() {\n        const topic = this.props.match.params.topic_id;\n        console.log(topic)\n        const topicName = topic ? topic.replace(/^\\w/, c => c.toUpperCase()) : '';\n        return (\n            <div className=\"article_add_container\">\n                {/* this.state.articleAddedId && <Redirect to={`/articles/${this.state.articleAddedId}`} /> */}\n                <h3 className=\"article_add_heading\">Post Article</h3><span className=\"current_topic\">Topic: {topicName ? topicName : 'Technology'}</span>\n                {this.props.loggedinUser && <span className=\"posting_as\">Posting as <strong>{this.props.loggedinUser.username}</strong></span>}\n                {!this.props.loggedInUser && <span className=\"posting_as\"><strong>Please log in to post</strong></span>}\n                <form className=\"article_add_form\">\n                    <div className=\"title_input\"><label>Title:</label><textarea onChange={this.handleTitleChange} /></div>\n                    <textarea className=\"body_input\" onChange={this.handleBodyChange}></textarea>\n                </form>\n                <button className=\"post_button\" disabled={!this.props.loggedInUser ? true : false} onClick={this.handlePost}>Post</button>\n            </div>\n        )\n    }\n\n    handleTitleChange = (event) => {\n        const title = event.target.value;\n        return this.setState({\n            title\n        })\n    }\n\n    handleBodyChange = (event) => {\n        const body = event.target.value;\n        return this.setState({\n            body\n        })\n    }\n\n    handlePost = () => {\n        const topic = this.props.match.params.topic_id;\n        const { title, body } = this.state;\n        const created_by = this.props.loggedInUser._id;\n        return api.addArticle(title, body, created_by, topic)\n            .then(({ data, status }) => {\n                if (status === 201) return this.setRedirect(data._doc._id);\n            })\n            .catch(err => console.log(err))\n    }\n\n    setRedirect = (id) => {\n        this.setState({\n            articleAddedId: id\n        })\n    }\n\n    componentWillMount() {\n        console.log('Component will mount')\n    }\n\n    handleRedirect = () => {\n        if (this.state.articleAddedId) {\n            return (\n                <Redirect to={`/articles/${this.state.articleAddedId}`} />\n            )\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.state.articleAddedId !== prevState.articleAddedId) {\n            this.handleRedirect()\n        }\n    }\n}\n\nArticleAdd.propTypes = {\n    loggedinUser: PropTypes.object,\n    match: PropTypes.object.isRequired\n}"]},"metadata":{},"sourceType":"module"}